# ─────────────────────────────────────────────
#  PhishDefender Backend — Environment Variables
# ─────────────────────────────────────────────
# Copy this file to .env and fill in real values.
# NEVER commit .env to source control.

# ── Application ───────────────────────────────
APP_ENV=development                          # development | production
APP_HOST=0.0.0.0
APP_PORT=8000
SECRET_KEY=change-me-to-a-random-secret     # used for any signed tokens

# ── PostgreSQL ────────────────────────────────
DATABASE_URL=postgresql+asyncpg://phish_user:phish_pass@localhost:5432/phishdefender
# Sync URL used by Alembic migrations
DATABASE_SYNC_URL=postgresql://phish_user:phish_pass@localhost:5432/phishdefender

# ── Microsoft Azure App Registration ──────────
# Create an App Registration in Azure AD with:
#   - Application (client) ID
#   - Directory (tenant) ID
#   - Client secret
#   - API Permission: Mail.Read (Application) on Microsoft Graph
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here

# ── Shared Mailboxes to ingest ─────────────────
# Comma-separated list of mailbox UPN / email addresses
SHARED_MAILBOXES=security-inbox@yourorg.com,abuse-reports@yourorg.com,phishing-reports@yourorg.com

# ── Ingestion Job ──────────────────────────────
# How often to poll each mailbox (seconds)
INGESTION_POLL_INTERVAL=300

# ── AI Classification ──────────────────────────
# Thresholds used by the rule-based classifier.
# Swap for a real ML model endpoint as needed.
AI_HIGH_THRESHOLD=0.80
AI_LOW_THRESHOLD=0.50

# ── Azure OpenAI (optional — not active by default) ────────────────────────────
# When these are set, the OpenAI classifier can be activated in ingestion.py.
# See README.md § "Azure OpenAI Classifier" for step-by-step activation instructions.
#
# 1. Create an Azure OpenAI resource in the Azure Portal.
# 2. Deploy a model (e.g. gpt-4o) and note the deployment name.
# 3. Copy the endpoint and API key from the resource's "Keys and Endpoint" blade.
#
AZURE_OPENAI_ENDPOINT=https://<your-resource-name>.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-api-key-here
AZURE_OPENAI_DEPLOYMENT=gpt-4o                  # your deployment name
AZURE_OPENAI_API_VERSION=2024-02-01

# ── CORS ───────────────────────────────────────
# Comma-separated allowed origins for the React frontend
CORS_ORIGINS=http://localhost:8080,http://localhost:5173
